# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

AthenaRenderer is a DirectX 12-based research rendering framework written in C++20. The project consists of two main components:

- **AthenaCore**: A static library containing the core rendering framework
- **AthenaViewer**: An executable application that demonstrates the framework capabilities

## Build System

This project uses Visual Studio 2022 with MSBuild. The solution is configured for Windows 10 SDK with the v143 platform toolset.

### Common Commands

**Building the solution:**
```bash
# Build Debug configuration for x64
msbuild AthenaRenderer.sln /p:Configuration=Debug /p:Platform=x64

# Build Release configuration for x64
msbuild AthenaRenderer.sln /p:Configuration=Release /p:Platform=x64

# Or use Visual Studio GUI to build
```

**NuGet package restore:**
```bash
nuget restore AthenaRenderer.sln
```

### Project Structure

**AthenaCore (Static Library):**
- `include/Athena/Core/` - Core DirectX 12 wrapper classes (Device, CommandQueue, SwapChain, DescriptorHeap)
- `include/Athena/Resources/` - Resource management (Buffer, Texture, UploadContext)
- `include/Athena/Scene/` - Scene objects (Camera, Mesh)
- `include/Athena/Utils/` - Utilities (Logger, Math)
- `src/Athena/` - Implementation files mirroring the include structure

**AthenaViewer (Application):**
- `main.cpp` - Demonstrates framework usage with a simple windowed application

### Key Dependencies

- DirectX 12 API (d3d12.lib, dxgi.lib, d3dcompiler.lib, dxguid.lib)
- DirectXTex (via NuGet package directxtex_desktop_win10)
- STB headers for image loading

### Architecture Notes

**Core Design Patterns:**
- RAII wrappers around DirectX 12 COM objects using Microsoft::WRL::ComPtr
- Separate abstraction layers for different DirectX 12 subsystems
- Resource management through dedicated classes for buffers and textures
- Logging system for debugging and development

**DirectX 12 Architecture:**
- Device class manages GPU adapter selection and device creation
- CommandQueue handles command list execution and synchronization
- SwapChain manages presentation and back buffer resources
- DescriptorHeap provides descriptor allocation and management

### Configuration

The project uses `AthenaCommon.props` for shared build settings:
- C++20 standard with C17
- Multi-processor compilation enabled
- Warning level 4
- Structured output directories (`bin/` and `obj/`)

### Shader Compilation

HLSL shaders are located in the `shaders/` directory. The project includes basic vertex and pixel shaders for rendering primitives and textured objects.

## Coding Style Guidelines

### Comment Style
- **Language**: Japanese comments using である調 (formal declarative style)
- **Consistency**: All comments must use である調, not ですます調
- **Examples**:
  ```cpp
  // Good (である調)
  // このクラスはレンダーグラフを管理する
  // リソースのライフタイムを自動で計算する
  
  // Bad (ですます調)  
  // このクラスはレンダーグラフを管理します
  // リソースのライフタイムを自動で計算します
  ```

### Code Conventions
- Use RAII patterns for resource management
- Prefer smart pointers over raw pointers
- Follow existing naming conventions (PascalCase for classes, camelCase for variables)
- Include descriptive comments for complex algorithms and architectural decisions
